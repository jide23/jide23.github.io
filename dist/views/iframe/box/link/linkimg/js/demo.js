var person = [{
    name: 'illustrio',
    motto: '海量图标多种模板',
    href: 'https://illustrio.com/',
    src: 'img/illustrio.com.png',
    sorts: 'icon'
}, {
    name: '60logo',
    motto: '品牌logo，矢量下载',
    href: 'http://www.60logo.com/',
    src: 'img/60logo.com.png',
    sorts: 'icon'
}, {
    name: 'iOSIconGallery',
    motto: 'APP图标收录和欣赏',
    href: 'https://www.iosicongallery.com/',
    src: 'img/iosicongallery.com.png',
    sorts: 'icon'
}, {
    name: 'ICONFONT',
    motto: '著名的阿里巴巴旗下icon图标网站',
    href: 'https://www.iconfont.cn/',
    src: 'img/iconfont.cn.png',
    sorts: 'icon'
}, {
    name: 'iconmonstr',
    motto: '高质量免费图标网站',
    href: 'https://iconmonstr.com/',
    src: 'img/iconmonstr.com.png',
    sorts: 'icon'
}, {
    name: '图标工场',
    motto: '一键快速生成iOSAndroid，WindowsPhoneWebAppiWatch(watchOS)PhoneGap(Cordova)等移动平台不同大小(规格尺寸)的App图标，快速预览，提供丰富选项，可以直接打包发布到应用市场，并提供相应的PSD模板。',
    href: 'https://icon.wuruihong.com/',
    src: 'img/icon.wuruihong.com.png',
    sorts: 'icon'
}, {
    name: 'loading制作',
    motto: '傻瓜式loading在线制作AnimatedGIFfromSVGIconsthousandsofSVGicons+tonsofCSSanimations=infinitecreativity',
    href: 'https://loading.io/icon/#',
    src: 'img/loading.io.png',
    sorts: 'icon'
}, {
    name: 'icomoon',
    motto: '矢量图打包成图标字体的技术平台',
    href: 'https://icomoon.io/',
    src: 'img/icomoon.io.png',
    sorts: 'icon'
}, {
    name: 'Easyicon',
    motto: '图标搜索大全',
    href: 'http://www.easyicon.net/',
    src: 'img/easyicon.net.png',
    sorts: 'icon'
}, {
    name: 'TheNounProject',
    motto: '高质量图标下载',
    href: 'https://thenounproject.com/',
    src: 'img/thenounproject.com.png',
    sorts: 'icon'
}, {
    name: 'iconfinder',
    motto: '高质量付费图标下载',
    href: 'https://www.iconfinder.com/',
    src: 'img/iconfinder.com.png',
    sorts: 'icon'
}, {
    name: 'themify',
    motto: '一套免费特色iconfont图标支持WP插件',
    href: 'http://themify.me/themify-icons',
    src: 'img/themify.me.png',
    sorts: 'icon'
}, {
    name: 'iconmonstr',
    motto: '精美免费简洁icon',
    href: 'http://iconmonstr.com/',
    src: 'img/iconmonstr.com.png',
    sorts: 'icon'
}, {
    name: 'Logodust',
    motto: '特赞！提供开源免费的LOGO',
    href: 'http://logodust.com/',
    src: 'img/logodust.com.png',
    sorts: 'icon'
}, {
    name: 'Iconjar',
    motto: '免费图标素材管理工具',
    href: 'http://geticonjar.com/freebies',
    src: 'img/geticonjar.com.png',
    sorts: 'icon'
}, {
    name: 'Flaticon',
    motto: '海量扁平化免费的图标库',
    href: 'http://www.flaticon.com/',
    src: 'img/flaticon.com.png',
    sorts: 'icon'
}, {
    name: 'iconstore',
    motto: '免费商用的高质量图标素材站',
    href: 'http://iconstore.co/',
    src: 'img/iconstore.co.png',
    sorts: 'icon'
}, {
    name: 'Logoeps',
    motto: '各大国际品牌logo矢量图',
    href: 'http://www.logoeps.com/',
    src: 'img/logoeps.com.png',
    sorts: 'icon'
}, {
    name: 'IOSicongallery',
    motto: 'IOS平台APP图标收录和欣赏',
    href: 'http://iosicongallery.com/',
    src: 'img/iosicongallery.com.png',
    sorts: 'icon'
}, {
    name: 'Emojione',
    motto: 'Emoji表情图标整理',
    href: 'http://emojione.com/demo/',
    src: 'img/emojione.com.png',
    sorts: 'icon'
}, {
    name: 'iconninja',
    motto: '海量图标搜索可生成csssprites',
    href: 'http://www.iconninja.com/',
    src: 'img/iconninja.com.png',
    sorts: 'icon'
}, {
    name: 'icons8',
    motto: '系统平台风格和web图标库',
    href: 'https://icons8.com/web-app/new-icons/all',
    src: 'img/icons8.com.png',
    sorts: 'icon'
}, {
    name: 'iconsfeed',
    motto: 'iOS系统应用图标收集和分享',
    href: 'http://www.iconsfeed.com/',
    src: 'img/iconsfeed.com.png',
    sorts: 'icon'
}, {
    name: '草莓图标',
    motto: '为开发者设计的一套免费开源图标库',
    href: 'http://chuangzaoshi.com/icon/',
    src: 'img/chuangzaoshi.com.png',
    sorts: 'icon'
}, {
    name: 'IconArchive',
    motto: '图标搜索。',
    href: 'http://www.iconarchive.com',
    src: 'img/iconarchive.com.png',
    sorts: 'icon'
}, {
    name: 'FindIcons',
    motto: '图标搜索。',
    href: 'http://findicons.com',
    src: 'img/findicons.com.png',
    sorts: 'icon'
}, {
    name: 'Fontello',
    motto: '图标字体制作工具',
    href: 'http://fontello.com/',
    src: 'img/fontello.com.png',
    sorts: 'icon'
}, {
    name: 'LogoEPS',
    motto: '可以免费下载矢量LOGO模板的网站',
    href: 'http://www.logoeps.com',
    src: 'img/logoeps.com.png',
    sorts: 'icon'
}, {
    name: 'Unsplash',
    motto: '免费图片',
    href: 'https://unsplash.com/new?page=1',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'StartupStockPhotos',
    motto: '免费图片',
    href: 'http://startupstockphotos.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Magdeleine',
    motto: '免费图片',
    href: 'http://magdeleine.co/license/cc0/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'SplitShire',
    motto: '免费图片',
    href: 'http://www.splitshire.com/recent-photos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'FreeNatureStock',
    motto: '免费图片',
    href: 'http://freenaturestock.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'JayMantri',
    motto: '免费图片',
    href: 'http://jaymantri.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'NewOldStock',
    motto: '免费图片',
    href: 'http://nos.twnsnd.co/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Moveast',
    motto: '免费图片',
    href: 'http://moveast.me/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Skitterphoto',
    motto: '免费图片',
    href: 'https://skitterphoto.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'FancyCrave',
    motto: '免费图片',
    href: 'http://fancycrave.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'BossFight',
    motto: '免费图片',
    href: 'https://bossfight.co/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'RealisticShots',
    motto: '免费图片',
    href: 'http://realisticshots.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'LittleVisuals',
    motto: '免费图片',
    href: 'http://littlevisuals.co/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'MMT',
    motto: '免费图片',
    href: 'http://mmtstock.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'BarnImages',
    motto: '免费图片',
    href: 'http://barnimages.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'SnapwireSnaps',
    motto: '免费图片',
    href: 'http://snapwiresnaps.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'PublicDomainArchive',
    motto: '免费图片',
    href: 'http://publicdomainarchive.com/public-domain-images/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'CrowTheStone',
    motto: '免费图片',
    href: 'http://crowthestone.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'TravelCoffeeBook',
    motto: '免费图片',
    href: 'http://travelcoffeebook.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'ZoommyPhotos',
    motto: '免费图片',
    href: 'http://zoommyapp.com/unique_photos',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Skuawk',
    motto: '免费图片',
    href: 'http://skuawk.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'StockImagePoint',
    motto: '免费图片',
    href: 'http://www.stock-image-point.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'FoodiesFeed',
    motto: '免费图片',
    href: 'https://www.foodiesfeed.com/trending-photos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Streetwill',
    motto: '免费图片',
    href: 'http://streetwill.co/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Cupcake',
    motto: '免费图片',
    href: 'http://cupcake.nilssonlee.se/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'MyStockPhotos',
    motto: '免费图片',
    href: 'http://mystock.photos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Epicantus',
    motto: '免费图片',
    href: 'http://epicantus.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'BaraArt',
    motto: '免费图片',
    href: 'http://www.bara-art.com/photos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'LibreShot',
    motto: '免费图片',
    href: 'https://libreshot.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'BrainAndStorm',
    motto: '免费图片',
    href: 'http://brainandstorm.com/visuals',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'CC0photo',
    motto: '免费图片',
    href: 'http://cc0.photo/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Photocrops',
    motto: '免费图片',
    href: 'http://www.photocrops.com/browse/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Foodshot',
    motto: '免费图片',
    href: 'http://foodshot.co/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'GoodFreePhotos',
    motto: '免费图片',
    href: 'https://www.goodfreephotos.com/tags/featured',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'PhotoCollections',
    motto: '免费图片',
    href: 'http://photocollections.io/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Polarfox',
    motto: '免费图片',
    href: 'http://photos.polarfox.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Freestocks',
    motto: '免费图片',
    href: 'http://freestocks.org/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'SemiRecta',
    motto: '免费图片',
    href: 'http://semi-recta.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Pexels',
    motto: '免费图片',
    href: 'https://www.pexels.com/leaderboard/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'LookingGlass',
    motto: '免费图片',
    href: 'https://lookingglassfreephotos.tumblr.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'GoodStockPhotos',
    motto: '免费图片',
    href: 'https://goodstock.photos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Pixabay',
    motto: '免费图片',
    href: 'https://pixabay.com/en/editors_choice/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Realgraphy',
    motto: '免费图片',
    href: 'https://realgraphy.org/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Freelyphotos',
    motto: '免费图片',
    href: 'http://freelyphotos.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'StockSandwich',
    motto: '免费图片',
    href: 'https://stocksandwich.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'RightLight',
    motto: '免费图片',
    href: 'http://rightlight.nordwoodthemes.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'PickleJar',
    motto: '免费图片',
    href: 'http://picklejar.in/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Stockified',
    motto: '免费图片',
    href: 'https://www.stockified.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Visualhunt',
    motto: '免费图片',
    href: 'https://visualhunt.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Burst',
    motto: '免费图片',
    href: 'https://burst.shopify.com/photos',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Monisphoto',
    motto: '免费图片',
    href: 'http://monisphoto.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'AltPhotos',
    motto: '免费图片',
    href: 'https://altphotos.com/altphotos/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'SlonPics',
    motto: '免费图片',
    href: 'http://www.slon.pics/shop/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Polayoutu',
    motto: '免费图片',
    href: 'http://www.polayoutu.com/collections',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Pxhere',
    motto: '免费图片',
    href: 'https://pxhere.com/en/photos?order=latest',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'kisspng',
    motto: '免费图片',
    href: 'https://www.kisspng.com/',
    src: 'img/logoeps.com.png',
    sorts: 'png'
}, {
    name: 'pngimg',
    motto: '免费图片',
    href: 'http://pngimg.com/',
    src: 'img/logoeps.com.png',
    sorts: 'png'
}, {
    name: 'freePNGs',
    motto: '免费图片',
    href: 'https://www.freepngs.com/',
    src: 'img/logoeps.com.png',
    sorts: 'png'
}, {
    name: 'freepik',
    motto: '免费图片',
    href: 'https://www.freepik.com',
    src: 'img/logoeps.com.png',
    sorts: 'png'
}, {
    name: 'PNGMARK',
    motto: '免费图片',
    href: 'http://www.pngmart.com/',
    src: 'img/logoeps.com.png',
    sorts: 'png'
}, {
    name: 'hippopx',
    motto: '免费图片',
    href: 'https://www.hippopx.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'PickPik',
    motto: '免费图片',
    href: 'https://www.pickpik.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'Gratisography',
    motto: '免费图片',
    href: 'http://gratisography.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'picjumbo',
    motto: '免费图片',
    href: 'https://picjumbo.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'istockphoto',
    motto: '免费图片',
    href: 'https://www.istockphoto.com/',
    src: 'img/logoeps.com.png',
    sorts: 'picture'
}, {
    name: 'PixelSquid',
    motto: '免费图片',
    href: 'https://www.pixelsquid.com/png',
    src: '',
    sorts: 'png'
}, ]
var inp = document.getElementsByClassName('inp')[0],
    btnList = document.getElementsByClassName('btn-list')[0],
    prompt = document.getElementsByClassName('prompt')[0],
    user = document.getElementsByClassName('user')[0];

function createList(list) {
    var str = '';
    list.forEach(function(ele, index) {
        str += '<a href =' + ele.href + ' target="_self">\
                    <li>\
                    <div class="head-img">\
                    <img src=' + ele.src + ' alt="">\
                    </div>\
                    <div class="tit">\
                    <p class="name">' + ele.name + '</p>\
                    <p class="motto">' + ele.motto + '</p>\
                    </div>\
                    </li>\
                </a>'
    })
    user.innerHTML = str
}
createList(person);
var state = createStore({
    text: '',
    sorts: 'all'
})
state.addFn(function() {
    createList(perArr());
    anti(show());
})
inp.oninput = anti(getInput, 1000)

function getInput() {
    state.change({
        type: 'text',
        value: this.value
    });
}

function anti(hander, delay) {
    var timer = null;
    return function() {
        var _self = this,
            args = arguments;
        clearTimeout(timer)
        timer = setTimeout(function() {
            hander.apply(_self, args)
        }, delay)
    }
}

function show() {
    if (user.children.length == 0) {
        prompt.style.display = 'block'
    } else {
        prompt.style.display = 'none'
    }
}

function addFn(obj, arr) {
    return function() {
        var lastArr = arr;
        for (prop in obj) {
            lastArr = obj[prop](state.getState()[prop], lastArr)
        }
        return lastArr
    }
}
var perArr = addFn({
    text: filterText,
    sorts: filtersorts
}, person)
btnList.onclick = function(e) {
    var tar = e.target;
    if (tar.tagName == 'OPTION') {
        document.getElementsByClassName('active')[0].className = '';
        tar.className = 'active';
        state.change({
            type: 'sorts',
            value: tar.getAttribute('sorts')
        })
    }
}

function filterText(text, arr) {
    return arr.filter(function(ele, index) {
        if (ele.name.indexOf(text) != -1 || ele.motto.indexOf(text) != -1) {
            return true
        }
    })
}

function filtersorts(sorts, arr) {
    if (sorts == 'all') {
        return arr
    } else {
        return arr.filter(function(ele, index) {
            if (ele.sorts == sorts) {
                return true
            }
        })
    }
}